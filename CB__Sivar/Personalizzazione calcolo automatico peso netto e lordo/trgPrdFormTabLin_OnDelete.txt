/*
*
*
*
*/
CREATE TRIGGER [dbo].[trgPrdFormTabLin_OnDelete]
ON [dbo].[PrdFormTabLin]
FOR DELETE
AS
Declare @sTabCod varchar(32)
Declare @sItemID varchar(32)

SET NOCOUNT ON

Declare [cCursor] Cursor LOCAL FAST_FORWARD For
Select TabCod, ItemID
From deleted

Open [cCursor]
Fetch Next From [cCursor] Into @sTabCod, @sItemID
While (@@Fetch_Status <> -1)
Begin
	Delete dbo.[PrdFormLocTexts]
	Where TableID = 'PrdFormTabLin'
		And ItemName1 = @sTabCod		
		
	Delete dbo.[PrdFormTabLinEx_Pers]
	Where TabCod = @sTabCod	
		And ItemID = @sItemID
	-- ----------------------------------------------------------
	Fetch Next From [cCursor] Into @sTabCod, @sItemID
End
Close [cCursor]
Deallocate [cCursor]